local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Position = UDim2.new(0, 50, 0, 50)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(1, -10, 0, 50)
ToggleButton.Position = UDim2.new(0, 5, 0, 25)
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Text = "Start Auto-Star"
ToggleButton.Parent = Frame

local AutoCollect = false

-- Função recursiva para encontrar estrelas
local function findStars(parent)
    local stars = {}
    for _, obj in pairs(parent:GetChildren()) do
        if obj:IsA("BasePart") and obj.Name:lower():find("star") then
            table.insert(stars, obj)
        elseif obj:IsA("Model") and obj.PrimaryPart and obj.Name:lower():find("star") then
            table.insert(stars, obj.PrimaryPart)
        end
        local inner = findStars(obj)
        for _, v in pairs(inner) do
            table.insert(stars, v)
        end
    end
    return stars
end

-- Função para mover suavemente
local function moveToPart(part, duration)
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp and part then
        local tweenInfo = TweenInfo.new(duration, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {CFrame = part.CFrame + Vector3.new(0,3,0)})
        tween:Play()
        tween.Completed:Wait()
    end
end

-- Loop principal
spawn(function()
    while true do
        if AutoCollect and LocalPlayer.Character then
            local stars = findStars(workspace)
            for _, star in pairs(stars) do
                if star:IsA("BasePart") then
                    local distance = (LocalPlayer.Character.HumanoidRootPart.Position - star.Position).Magnitude
                    local time = math.clamp(distance/16, 0.5, 2) -- ajusta a velocidade natural
                    moveToPart(star, time)
                    wait(math.random(3,6)/10) -- delay aleatório
                end
            end
        end
        wait(0.5)
    end
end)

-- Botão ligar/desligar
ToggleButton.MouseButton1Click:Connect(function()
    AutoCollect = not AutoCollect
    ToggleButton.Text = AutoCollect and "Stop Auto-Star" or "Start Auto-Star"
end)
